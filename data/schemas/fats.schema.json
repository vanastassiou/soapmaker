{
  "$id": "oils.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": {
    "$ref": "#/definitions/Oil"
  },
  "definitions": {
    "Oil": {
      "additionalProperties": false,
      "properties": {
        "density": {
          "description": "Density in g/mL",
          "maximum": 1.1,
          "minimum": 0.7,
          "type": "number"
        },
        "description": {
          "description": "Brief description of the oil",
          "minLength": 1,
          "type": "string"
        },
        "dietary": {
          "additionalProperties": false,
          "description": "Dietary and ethical classification flags",
          "properties": {
            "animalBased": {
              "description": "True if derived from animal sources",
              "type": "boolean"
            },
            "commonAllergen": {
              "description": "True if associated with common allergens (tree nuts, soy, etc.)",
              "type": "boolean"
            },
            "ethicalConcerns": {
              "description": "True if there are significant ethical concerns (e.g., palm oil deforestation)",
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "fattyAcids": {
          "additionalProperties": false,
          "description": "Fatty acid percentages (0-100)",
          "properties": {
            "lauric": {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            },
            "linoleic": {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            },
            "linolenic": {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            },
            "myristic": {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            },
            "oleic": {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            },
            "palmitic": {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            },
            "ricinoleic": {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            },
            "stearic": {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            }
          },
          "type": "object"
        },
        "ins": {
          "description": "INS value (sapKOH * 1000 - iodine)",
          "maximum": 400,
          "minimum": 0,
          "type": "number"
        },
        "iodine": {
          "description": "Iodine value",
          "maximum": 200,
          "minimum": 0,
          "type": "number"
        },
        "name": {
          "description": "Display name of the oil/fat",
          "minLength": 1,
          "type": "string"
        },
        "references": {
          "items": {
            "additionalProperties": false,
            "properties": {
              "section": {
                "type": "string"
              },
              "source": {
                "type": "string"
              },
              "url": {
                "format": "uri",
                "type": "string"
              }
            },
            "required": [
              "source",
              "section",
              "url"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "sap": {
          "additionalProperties": false,
          "description": "Saponification values for different lye types",
          "properties": {
            "koh": {
              "description": "Grams of KOH per gram of oil",
              "maximum": 0.4,
              "minimum": 0,
              "type": "number"
            },
            "naoh": {
              "description": "Grams of NaOH per gram of oil",
              "maximum": 0.3,
              "minimum": 0,
              "type": "number"
            }
          },
          "required": [
            "naoh",
            "koh"
          ],
          "type": "object"
        },
        "usage": {
          "additionalProperties": false,
          "description": "Recommended usage percentage range",
          "properties": {
            "max": {
              "maximum": 100,
              "minimum": 0,
              "type": "integer"
            },
            "min": {
              "maximum": 100,
              "minimum": 0,
              "type": "integer"
            }
          },
          "required": [
            "min",
            "max"
          ],
          "type": "object"
        }
      },
      "required": [
        "name",
        "sap",
        "fattyAcids",
        "iodine",
        "ins",
        "density",
        "usage",
        "description"
      ],
      "type": "object"
    }
  },
  "description": "Schema for oils used in soap making calculations",
  "title": "Soap Making Oils Database",
  "type": "object"
}
