{
  "lye-amount": {
    "category": "core",
    "domain": ["calculator"],
    "name": "Lye amount",
    "summary": "Calculates how much lye (sodium hydroxide or potassium hydroxide) is needed to saponify your fats.",
    "userFriendly": "Every fat requires a specific amount of lye to turn into soap. This amount is determined by the fat's SAP (saponification) value. We multiply each fat's weight by its SAP value, add them all up, then reduce the total based on your superfat percentage to leave some oils unsaponified for skin conditioning.",
    "formula": "Lye = (fat\u2081 \u00d7 SAP\u2081 + fat\u2082 \u00d7 SAP\u2082 + ...) \u00d7 (1 - superfat/100)",
    "variables": {
      "fat\u2099": "Weight of each fat in your recipe (grams or ounces)",
      "SAP\u2099": "Saponification value for each fat (grams lye per gram fat)",
      "superfat": "Percentage of fats to leave unsaponified (typically 3-8%)"
    },
    "example": {
      "scenario": "500g olive oil with 5% superfat using NaOH",
      "steps": [
        "Olive oil SAP for NaOH = 0.134",
        "Base lye needed = 500 \u00d7 0.134 = 67g",
        "With 5% superfat = 67 \u00d7 (1 - 0.05) = 63.65g NaOH"
      ]
    },
    "technical": "The SAP value represents the mass ratio of alkali to fat required for complete saponification. For NaOH, values typically range from 0.12-0.19. KOH values are approximately 1.4\u00d7 higher due to its greater molecular weight (56.1 vs 40.0 g/mol). SAP values are derived from the average molecular weight of triglycerides in each fat.",
    "related": [
      "superfat",
      "sap-value"
    ],
    "references": [
      {
        "sourceId": "pubchem",
        "section": "General reference",
        "url": "https://pubchem.ncbi.nlm.nih.gov/compound/Sodium-Hydroxide"
      }
    ],
    "learnMore": {
      "text": "LibreTexts: Saponification",
      "url": "https://chem.libretexts.org/Bookshelves/Organic_Chemistry/Supplemental_Modules_(Organic_Chemistry)/Carboxylic_Acids/Reactivity_of_Carboxylic_Acids/Hydrolysis_of_Esters"
    }
  },
  "water-amount": {
    "category": "core",
    "domain": ["calculator"],
    "name": "Water amount",
    "summary": "Calculates the water needed to dissolve your lye.",
    "userFriendly": "Lye must be dissolved in water before mixing with oils. The water-to-lye ratio determines your lye concentration. A 2:1 ratio (twice as much water as lye) gives a 33% lye solution, which is standard for most recipes.",
    "formula": "Water = Lye amount \u00d7 Water ratio",
    "variables": {
      "Lye amount": "Calculated lye weight from lye formula",
      "Water ratio": "Water-to-lye ratio (typically 1.5 to 3.0)"
    },
    "example": {
      "scenario": "63.65g NaOH with 2:1 water ratio",
      "steps": [
        "Water = 63.65 \u00d7 2 = 127.3g water",
        "Lye concentration = 63.65 / (63.65 + 127.3) = 33%"
      ]
    },
    "technical": "Lower water ratios (higher lye concentration) speed up trace and reduce cure time but increase working temperature. A 50% lye solution is the practical maximum solubility for NaOH at room temperature. Most soapmakers use 28-33% solutions (2:1 to 2.5:1 ratio).",
    "related": [
      "lye-concentration"
    ],
    "references": [
      {
        "sourceId": "crc-handbook",
        "section": "NaOH Solubility",
        "url": "https://pubchem.ncbi.nlm.nih.gov/compound/Sodium-Hydroxide#section=Solubility"
      }
    ]
  },
  "fatty-acid-profile": {
    "category": "core",
    "domain": ["calculator"],
    "name": "Fatty acid profile",
    "summary": "Calculates the weighted average of fatty acids across all fats in your recipe.",
    "userFriendly": "Each fat is made up of different fatty acids (like lauric, oleic, palmitic). Your soap's properties depend on which fatty acids dominate. We calculate the overall fatty acid profile by taking a weighted average based on how much of each fat you're using.",
    "formula": "Fatty acid % = (fat\u2081% \u00d7 acid\u2081 + fat\u2082% \u00d7 acid\u2082 + ...) / 100",
    "variables": {
      "fat\u2099%": "Percentage of each fat in the recipe (by weight)",
      "acid\u2099": "Percentage of a specific fatty acid in that fat"
    },
    "example": {
      "scenario": "50% coconut oil (49% lauric) + 50% olive oil (0% lauric)",
      "steps": [
        "Lauric acid = (0.50 \u00d7 49) + (0.50 \u00d7 0)",
        "Lauric acid = 24.5%"
      ]
    },
    "technical": "Fatty acid profiles are stored in the fats database as percentages that should sum to approximately 100%. The weighted average calculation preserves this property. Fourteen fatty acids are tracked: caprylic (C8:0), capric (C10:0), lauric (C12:0), myristic (C14:0), palmitic (C16:0), palmitoleic (C16:1), stearic (C18:0), oleic (C18:1), ricinoleic (C18:1-OH), linoleic (C18:2), linolenic (C18:3), arachidic (C20:0), behenic (C22:0), and erucic (C22:1).",
    "related": [
      "hardness",
      "cleansing",
      "conditioning"
    ],
    "references": [
      {
        "sourceId": "usda-fooddata",
        "section": "General reference",
        "url": "https://fdc.nal.usda.gov/"
      }
    ]
  },
  "volume-estimate": {
    "category": "core",
    "domain": ["calculator"],
    "name": "Volume estimate",
    "summary": "Estimates the final volume of your soap batch for mold sizing.",
    "userFriendly": "Knowing your soap's volume helps you choose the right mold size. We calculate the volumes of fats, water, and lye separately using their densities, then account for approximately 5% volume reduction during saponification.",
    "formula": "Volume = (Vfats + Vwater + Vlye) \u00d7 0.95",
    "variables": {
      "Vfats": "Fat volume = fat weight / fat density (avg ~0.91 g/mL)",
      "Vwater": "Water volume = water weight / 1.0 g/mL",
      "Vlye": "Lye volume = lye weight / 2.13 g/mL",
      "0.95": "5% reduction during saponification"
    },
    "example": {
      "scenario": "500g oils, 127g water, 64g NaOH",
      "steps": [
        "Vfats = 500 / 0.91 = 549 mL",
        "Vwater = 127 / 1.0 = 127 mL",
        "Vlye = 64 / 2.13 = 30 mL",
        "Base = 549 + 127 + 30 = 706 mL",
        "Final = 706 \u00d7 0.95 = 671 mL (\u00b112%)"
      ]
    },
    "technical": "Volume calculations include \u00b112% uncertainty to account for: air incorporation during mixing, temperature variations, water evaporation during cure (10-15% loss), and variations in actual oil densities. The saponification reduction factor (0.95) accounts for molecular rearrangement and water binding during the chemical reaction.",
    "related": [
      "cure"
    ],
    "references": [
      {
        "sourceId": "crc-handbook",
        "section": "Density Tables",
        "url": "https://pubchem.ncbi.nlm.nih.gov/compound/Water#section=Density"
      }
    ]
  },
  "hardness": {
    "category": "properties",
    "domain": ["calculator"],
    "name": "Hardness",
    "summary": "Predicts how hard your soap bar will be.",
    "userFriendly": "Hardness measures how firm your soap bar will be. Hard soaps last longer and unmold faster. Saturated fatty acids (those with no double bonds) create harder bars because they pack together tightly. The saturated fatty acids are summed to estimate hardness.",
    "formula": "Hardness = caprylic + capric + lauric + myristic + palmitic + stearic + arachidic + behenic",
    "variables": {
      "Each term": "Percentage of that fatty acid in the recipe's profile"
    },
    "example": {
      "scenario": "Recipe with 24% lauric, 8% myristic, 10% palmitic, 5% stearic",
      "steps": [
        "Hardness = 24 + 8 + 10 + 5 = 47",
        "This is within the recommended range of 29-54"
      ]
    },
    "technical": "This formula sums all saturated fatty acids. The correlation with actual bar hardness has been empirically validated by soapmakers. Values below 29 may result in soft bars requiring extended cure times. Values above 54 may produce brittle bars that crack.",
    "recommendedRange": {
      "min": 29,
      "max": 54
    },
    "related": [
      "saturated",
      "hardness"
    ],
    "references": [
      {
        "sourceId": "journal-chemical-education",
        "section": "Soap formulation and properties",
        "url": "https://pubs.acs.org/doi/10.1021/ed300589k",
        "note": "Peer-reviewed reference on soap chemistry and formulation"
      }
    ]
  },
  "cleansing": {
    "category": "properties",
    "domain": ["calculator"],
    "name": "Cleansing",
    "summary": "Predicts how effectively your soap will remove dirt and oils.",
    "userFriendly": "Cleansing measures how well your soap strips away oils and dirt. Short-chain saturated fatty acids (lauric and myristic, found in coconut and palm kernel oils) create soaps with strong cleansing action. High cleansing values are great for laundry or kitchen soap but can be drying for skin.",
    "formula": "Cleansing = caprylic + capric + lauric + myristic",
    "variables": {
      "caprylic": "C8:0 - found in coconut, palm kernel",
      "capric": "C10:0 - found in coconut, palm kernel",
      "lauric": "C12:0 - abundant in coconut (49%), palm kernel (48%)",
      "myristic": "C14:0 - found in coconut (18%), palm kernel (16%)"
    },
    "example": {
      "scenario": "20% coconut oil in recipe",
      "steps": [
        "Coconut contributes: 8% caprylic/capric + 49% lauric + 18% myristic",
        "At 20% of recipe: 0.20 \u00d7 (8 + 49 + 18) = 15 cleansing"
      ]
    },
    "technical": "Short-chain fatty acids (C8-C14) produce sodium salts that are highly soluble and create micelles more readily, leading to stronger detergent action. The trade-off is increased skin irritation potential at high levels.",
    "recommendedRange": {
      "min": 12,
      "max": 22
    },
    "related": [
      "cleansing",
      "bubbly"
    ],
    "references": [
      {
        "sourceId": "journal-chemical-education",
        "section": "General reference",
        "note": "Peer-reviewed explanation of surfactant chemistry"
      }
    ]
  },
  "conditioning": {
    "category": "properties",
    "domain": ["calculator"],
    "name": "Conditioning",
    "summary": "Predicts how moisturizing your soap will feel.",
    "userFriendly": "Conditioning measures how gentle and moisturizing your soap feels on skin. Unsaturated fatty acids (oleic, linoleic) create softer soaps that are less stripping and more conditioning. Olive oil, with its high oleic acid content, is prized for conditioning bars.",
    "formula": "Conditioning = palmitoleic + oleic + ricinoleic + linoleic + linolenic + erucic",
    "variables": {
      "oleic": "C18:1 - abundant in olive (71%), avocado, sweet almond",
      "linoleic": "C18:2 - found in sunflower, safflower, hemp",
      "ricinoleic": "C18:1-OH - unique to castor oil (90%)"
    },
    "example": {
      "scenario": "60% olive oil in recipe",
      "steps": [
        "Olive contributes 71% oleic acid",
        "At 60% of recipe: 0.60 \u00d7 71 = 42.6 conditioning"
      ]
    },
    "technical": "Unsaturated fatty acids produce sodium salts with kinked carbon chains that don't pack as tightly, resulting in softer bars with less oil-stripping action. The hydroxyl group on ricinoleic acid adds humectant properties unique to castor oil.",
    "recommendedRange": {
      "min": 44,
      "max": 69
    },
    "related": [
      "conditioning",
      "unsaturated"
    ],
    "references": [
      {
        "sourceId": "usda-fooddata",
        "section": "Fatty Acid Profiles",
        "url": "https://fdc.nal.usda.gov/"
      }
    ],
    "learnMore": {
      "text": "LibreTexts: Lipids",
      "url": "https://chem.libretexts.org/Bookshelves/Biological_Chemistry/Supplemental_Modules_(Biological_Chemistry)/Lipids"
    }
  },
  "bubbly": {
    "category": "properties",
    "domain": ["calculator"],
    "name": "Bubbly lather",
    "summary": "Predicts how much fluffy, bubbly lather your soap produces.",
    "userFriendly": "Bubbly measures the volume and lightness of your soap's lather\u2014those fluffy, airy bubbles. Lauric and myristic acids (from coconut oil) are the primary drivers of bubbles. Ricinoleic acid (from castor oil) acts as a lather booster and stabilizer.",
    "formula": "Bubbly = lauric + myristic + ricinoleic",
    "variables": {
      "lauric": "C12:0 - the primary bubble-maker",
      "myristic": "C14:0 - contributes to lather",
      "ricinoleic": "C18:1-OH - stabilizes and enhances bubbles"
    },
    "example": {
      "scenario": "25% coconut + 5% castor",
      "steps": [
        "Coconut: 0.25 \u00d7 (49 + 18) = 16.75",
        "Castor: 0.05 \u00d7 90 = 4.5",
        "Bubbly = 16.75 + 4.5 = 21.25"
      ]
    },
    "technical": "Sodium laurate and myristate have optimal hydrophilic-lipophilic balance (HLB) for foam formation. Ricinoleic acid's hydroxyl group increases water solubility while maintaining surfactant properties, creating more stable foam structures.",
    "recommendedRange": {
      "min": 14,
      "max": 46
    },
    "related": [
      "bubbly",
      "castor-oil"
    ],
    "references": [
      {
        "sourceId": "journal-chemical-education",
        "section": "Soap formulation and lather properties",
        "url": "https://pubs.acs.org/doi/10.1021/ed300589k",
        "note": "Peer-reviewed reference on soap chemistry and foam formation"
      }
    ]
  },
  "creamy": {
    "category": "properties",
    "domain": ["calculator"],
    "name": "Creamy lather",
    "summary": "Predicts how dense, stable, and lotion-like your lather will be.",
    "userFriendly": "Creamy measures the density and stability of your lather\u2014that rich, thick, lotion-like foam. Palmitic and stearic acids (from palm oil, tallow, shea butter) create stable, creamy lather. Ricinoleic acid from castor oil also contributes to lather creaminess.",
    "formula": "Creamy = palmitic + stearic + ricinoleic",
    "variables": {
      "palmitic": "C16:0 - found in palm (44%), tallow, lard",
      "stearic": "C18:0 - found in shea (45%), cocoa butter",
      "ricinoleic": "C18:1-OH - from castor oil"
    },
    "example": {
      "scenario": "15% palm + 10% shea + 5% castor",
      "steps": [
        "Palm: 0.15 \u00d7 44 = 6.6 (palmitic)",
        "Shea: 0.10 \u00d7 45 = 4.5 (stearic)",
        "Castor: 0.05 \u00d7 90 = 4.5 (ricinoleic)",
        "Creamy = 6.6 + 4.5 + 4.5 = 15.6"
      ]
    },
    "technical": "Sodium palmitate and stearate form larger, more stable micelles than short-chain fatty acids, producing denser foam with smaller, more uniform bubbles. The combination of bubbly and creamy values determines overall lather character.",
    "recommendedRange": {
      "min": 16,
      "max": 48
    },
    "related": [
      "creamy"
    ],
    "references": [
      {
        "sourceId": "journal-chemical-education",
        "section": "Soap formulation and lather properties",
        "url": "https://pubs.acs.org/doi/10.1021/ed300589k",
        "note": "Peer-reviewed reference on soap chemistry and foam stability"
      }
    ]
  },
  "iodine-value": {
    "category": "properties",
    "domain": ["calculator"],
    "name": "Iodine value",
    "summary": "Measures the degree of unsaturation in your recipe, predicting shelf stability.",
    "userFriendly": "Iodine value indicates how much unsaturated fat is in your recipe. Lower values mean more saturated fats (harder, more stable bars). Higher values mean more unsaturated fats (softer, more conditioning bars but shorter shelf life). It's a weighted average of each fat's iodine value.",
    "formula": "Iodine = (fat\u2081% \u00d7 IV\u2081 + fat\u2082% \u00d7 IV\u2082 + ...) / 100",
    "variables": {
      "fat\u2099%": "Percentage of each fat in the recipe",
      "IV\u2099": "Iodine value of that fat (grams I\u2082 per 100g fat)"
    },
    "example": {
      "scenario": "50% coconut (IV 8) + 50% olive (IV 81)",
      "steps": [
        "Iodine = (50 \u00d7 8 + 50 \u00d7 81) / 100",
        "Iodine = (400 + 4050) / 100 = 44.5"
      ]
    },
    "technical": "Iodine value measures grams of iodine absorbed per 100g of fat, quantifying C=C double bonds. Each double bond absorbs 2 iodine atoms. High IV oils (>70) are prone to oxidative rancidity (DOS). The chemistry: I\u2082 adds across double bonds in an addition reaction.",
    "recommendedRange": {
      "min": 41,
      "max": 70
    },
    "related": [
      "iodine",
      "dos",
      "unsaturated"
    ],
    "references": [
      {
        "sourceId": "aocs",
        "section": "General reference",
        "url": "https://library.aocs.org/"
      }
    ]
  },
  "ins-value": {
    "category": "properties",
    "domain": ["calculator"],
    "name": "INS value",
    "summary": "A combined index originally intended to predict overall soap quality.",
    "userFriendly": "INS combines saponification value and iodine value into a single number. It was originally suggested that values around 160 produce 'ideal' soap, but this is controversial. Many excellent soaps fall outside this range. Use it as one data point, not a definitive quality measure.",
    "formula": "INS = SAP value \u00d7 1000 - Iodine value",
    "variables": {
      "SAP value": "Saponification value (typically as mg KOH/g for this formula)",
      "Iodine value": "Iodine value of the fat"
    },
    "example": {
      "scenario": "Olive oil: SAP 190 mg KOH/g, IV 81",
      "steps": [
        "INS = 190 - 81 = 109",
        "Below the 'ideal' range, yet olive oil makes excellent soap"
      ]
    },
    "technical": "The INS concept was popularized by Dr. Robert McDaniel who suggested 160 as ideal. Criticism: 100% castile (INS ~105) is a beloved classic soap; 100% cocoa butter (INS ~157) produces poor lather. The metric was designed for industrial soap, not artisan bars.",
    "recommendedRange": {
      "min": 136,
      "max": 165
    },
    "related": [
      "ins",
      "sap-value",
      "iodine"
    ],
    "references": [
      {
        "sourceId": "journal-aocs",
        "section": "Structure Indices in FA Chemistry",
        "url": "https://doi.org/10.1007/s11746-002-0569-4",
        "note": "Peer-reviewed critique of iodine value as quality predictor"
      }
    ]
  },
  "profile-error": {
    "category": "optimization",
    "domain": ["calculator"],
    "name": "Profile error (optimization)",
    "summary": "Measures how close the current recipe is to your target fatty acid profile.",
    "userFriendly": "When you specify target properties, we convert them to target fatty acid percentages. The profile error measures how far off the current recipe is from those targets. We square each difference so that large errors are penalized more heavily, then sum them up.",
    "formula": "Error = (target\u2081 - actual\u2081)\u00b2 + (target\u2082 - actual\u2082)\u00b2 + ...",
    "variables": {
      "target\u2099": "Desired percentage for fatty acid n",
      "actual\u2099": "Current percentage achieved"
    },
    "example": {
      "scenario": "Target 50% lauric, achieved 45%",
      "steps": [
        "Error contribution = (50 - 45)\u00b2 = 25",
        "Total error is sum across all target fatty acids"
      ]
    },
    "technical": "Sum of squared errors (SSE) is used because: (1) it penalizes large deviations more than small ones, (2) it's differentiable for gradient descent, (3) it's always positive. The optimizer minimizes this value iteratively.",
    "related": [
      "weight-optimization",
      "match-quality"
    ],
    "references": [
      {
        "sourceId": "nist-handbook",
        "section": "4.1.4.1 Linear Least Squares Regression",
        "url": "https://www.itl.nist.gov/div898/handbook/pmd/section1/pmd141.htm",
        "note": "Sum of squared errors minimization for model fitting"
      }
    ]
  },
  "weight-optimization": {
    "category": "optimization",
    "domain": ["calculator"],
    "name": "Weight optimization algorithm",
    "summary": "Iteratively adjusts fat percentages to minimize the profile error.",
    "userFriendly": "Once fats are selected, we need to find the best percentages. The optimizer starts with equal portions, then repeatedly tests small adjustments (shifting 2% between pairs of fats). If an adjustment reduces the error, we keep it. This continues until no improvement is found or 100 iterations pass.",
    "formula": "For each iteration: test recipe\u00b1\u0394% for all fat pairs, keep best",
    "variables": {
      "Iterations": "Maximum 100 rounds of optimization",
      "Step size": "2% shifted between fat pairs each test",
      "Convergence": "Stop when error < 0.01"
    },
    "example": {
      "scenario": "3 fats starting at 33% each",
      "steps": [
        "Test: A=35%, B=31%, C=33% \u2192 error = 42",
        "Test: A=31%, B=35%, C=33% \u2192 error = 38 (better!)",
        "Keep B=35%, continue testing other pairs",
        "Repeat until converged"
      ]
    },
    "technical": "This is a form of coordinate descent with pairwise swaps. Complexity is O(iterations \u00d7 n\u00b2) where n is the number of fats. The algorithm maintains constraints: min 5% per fat, max 80% per fat, total = 100%. Local minima are possible but results are generally good for soap formulation.",
    "related": [
      "profile-error",
      "match-quality"
    ],
    "references": [
      {
        "sourceId": "mathematical-programming",
        "section": "General reference",
        "note": "Academic paper on coordinate descent optimization"
      }
    ]
  },
  "match-quality": {
    "category": "optimization",
    "domain": ["calculator"],
    "name": "Match quality score",
    "summary": "Converts the profile error into a user-friendly percentage score.",
    "userFriendly": "After optimization, we calculate how well the recipe matches your targets. The match quality is shown as a percentage: 100% means perfect match, lower values mean some targets couldn't be fully achieved. It's based on the average deviation from targets.",
    "formula": "Match % = 100 - (average deviation \u00d7 3)",
    "variables": {
      "average deviation": "Sum of |target - actual| / number of targets",
      "3": "Scaling factor to spread scores reasonably"
    },
    "example": {
      "scenario": "3 targets with deviations of 2, 4, 3",
      "steps": [
        "Total deviation = 2 + 4 + 3 = 9",
        "Average = 9 / 3 = 3",
        "Match quality = 100 - (3 \u00d7 3) = 91%"
      ]
    },
    "technical": "The absolute deviation is used (not squared) for the quality score to be more interpretable. The factor of 3 was empirically chosen so that typical good matches score 85-95%, and poor matches fall below 70%. Scores are clamped to [0, 100].",
    "related": [
      "profile-error",
      "weight-optimization"
    ],
    "references": [
      {
        "sourceId": "nist-handbook",
        "section": "4.4.4.1 How can I tell if a model fits my data?",
        "url": "https://www.itl.nist.gov/div898/handbook/pmd/section4/pmd44.htm",
        "note": "Model fit quality assessment methods"
      }
    ]
  },
  "property-to-fatty-acid": {
    "category": "optimization",
    "domain": ["calculator"],
    "name": "Property to fatty acid conversion",
    "summary": "Converts your target soap properties into target fatty acid percentages.",
    "userFriendly": "When you enter targets like 'hardness: 40, cleansing: 18', we need to convert these to fatty acid targets for the optimizer. We use fixed ratios based on how each fatty acid contributes to each property.",
    "formula": "lauric = cleansing \u00d7 0.7, myristic = cleansing \u00d7 0.3, etc.",
    "variables": {
      "Cleansing \u2192 Lauric": "70% of cleansing target",
      "Cleansing \u2192 Myristic": "30% of cleansing target",
      "Remaining hardness \u2192 Palmitic": "60%",
      "Remaining hardness \u2192 Stearic": "40%",
      "Conditioning \u2192 Oleic": "80%",
      "Conditioning \u2192 Others": "Linoleic 12%, ricinoleic 5%, linolenic 3%"
    },
    "example": {
      "scenario": "Target cleansing: 18, hardness: 40",
      "steps": [
        "Lauric = 18 \u00d7 0.7 = 12.6%",
        "Myristic = 18 \u00d7 0.3 = 5.4%",
        "Hardness from lauric+myristic = 18",
        "Remaining hardness = 40 - 18 = 22",
        "Palmitic = 22 \u00d7 0.6 = 13.2%",
        "Stearic = 22 \u00d7 0.4 = 8.8%"
      ]
    },
    "technical": "These ratios are heuristics based on typical fat compositions and property correlations. They're not exact chemistry but provide reasonable starting points for the optimizer. The conversion handles property dependencies (e.g., cleansing is a subset of hardness).",
    "related": [
      "hardness",
      "cleansing",
      "conditioning"
    ],
    "references": [
      {
        "sourceId": "usda-fooddata",
        "section": "Fatty acid averages (derived)",
        "url": "https://fdc.nal.usda.gov/"
      }
    ]
  },
  "additive-amount": {
    "category": "core",
    "domain": ["calculator"],
    "name": "Additive amount",
    "summary": "Calculates additive weights as a percentage of your oil weight.",
    "userFriendly": "Additives like essential oils, clays, and colourants are measured as a percentage of your total fat weight. For example, if an essential oil is used at 3% and you have 500g of oils, you'd add 15g of essential oil.",
    "formula": "Additive weight = Total fat weight \u00d7 (usage % / 100)",
    "variables": {
      "Total fat weight": "Sum of all fats in your recipe",
      "usage %": "Recommended percentage for the additive"
    },
    "example": {
      "scenario": "500g oils, lavender EO at 3%",
      "steps": [
        "Additive = 500 \u00d7 (3 / 100) = 15g lavender EO"
      ]
    },
    "technical": "Usage percentages are stored in the additives database with min/max ranges. For essential oils, IFRA guidelines inform maximum safe usage rates. For functional additives like sodium lactate, upper limits prevent issues like brittleness.",
    "related": [
      "essential-oil",
      "additive"
    ],
    "references": [
      {
        "sourceId": "ifra",
        "section": "General reference",
        "url": "https://ifrafragrance.org/safe-use/library"
      }
    ]
  },
  "unit-conversion": {
    "category": "core",
    "domain": ["calculator"],
    "name": "Unit conversions",
    "summary": "Converts between grams, ounces, milliliters, and fluid ounces.",
    "userFriendly": "The recipe builder supports both metric (grams, mL) and imperial (ounces, fl oz) units. All internal calculations use metric, then convert for display if needed.",
    "formula": "oz = g / 28.3495, fl oz = mL / 29.5735",
    "variables": {
      "28.3495": "Grams per ounce (mass)",
      "29.5735": "Milliliters per fluid ounce (volume)"
    },
    "example": {
      "scenario": "500g oils in ounces",
      "steps": [
        "500 / 28.3495 = 17.64 oz"
      ]
    },
    "technical": "Conversion constants follow NIST standards. Volume conversions also require density values: water = 1.0 g/mL, NaOH = 2.13 g/mL, average fat = 0.91 g/mL (varies by fat type).",
    "related": [
      "volume-estimate"
    ],
    "references": [
      {
        "sourceId": "nist",
        "section": "General reference",
        "url": "https://www.nist.gov/pml/special-publication-811"
      }
    ]
  },
  "density-constants": {
    "category": "core",
    "domain": ["calculator"],
    "name": "Density constants",
    "summary": "Material densities used for volume calculations.",
    "userFriendly": "Different materials have different densities (weight per unit volume). We use these to convert between weight and volume measurements.",
    "formula": "Volume = Weight / Density",
    "variables": {
      "Water density": "1.0 g/mL",
      "NaOH density": "2.13 g/mL",
      "Default fat density": "0.91 g/mL",
      "Individual fats": "Stored in fats database (0.86-0.97 g/mL)"
    },
    "example": {
      "scenario": "Volume of 100g coconut oil",
      "steps": [
        "Coconut oil density \u2248 0.92 g/mL",
        "Volume = 100 / 0.92 = 108.7 mL"
      ]
    },
    "technical": "Fat densities vary with fatty acid composition: more saturated fats are denser. Castor oil (0.96 g/mL) is denser than most due to ricinoleic acid's hydroxyl group. NaOH density is for solid lye; dissolved lye solution has different density based on concentration.",
    "related": [
      "volume-estimate"
    ],
    "references": [
      {
        "sourceId": "crc-handbook",
        "section": "General reference",
        "note": "Standard reference for physical constants"
      }
    ]
  }
}